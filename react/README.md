# TDDì™€ ë¦¬ì•¡íŠ¸ í…ŒìŠ¤íŠ¸ (í”„ë¡ íŠ¸ì—”ë“œê°œë°œìžë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ ë§ˆìŠ¤í„° í´ëž˜ìŠ¤ ðŸ¯)

https://academy.dream-coding.com/courses/react-tdd-invite-only-n9M24kN6ahvtS8Dw

## 1ì¼ì°¨: React Testing ì¤€ë¹„

### ë§ˆìŒê°€ì§

ì–´ë–»ê²Œ React ë¼ëŠ” êµ¬ì²´ì ì¸ Application ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ”ì§€, ì–´ë–»ê²Œ í•´ì•¼ ì´˜ì´˜í•˜ê²Œ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìžˆëŠ”ì§€ 100% ìžì‹ ê°ì„ ì´ë²ˆ ê°•ì˜ì—ì„œ ê¹¨ìš°ì¹˜ë„ë¡ í•˜ìž.

### êµ¬í˜„ë§Œ ëœ ìƒíƒœì¸, TDDê°€ ì•„ë‹ê²½ìš°?

ìµœì†Œí•œì˜ ì‹œê°„, ìµœì†Œí•œì˜ í…ŒìŠ¤íŠ¸ë¡œ Appì˜ 70í¼ì„¼íŠ¸ë¥¼ ì»¤ë²„í•˜ëŠ” íš¨ìœ¨ì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ìž‘ì„±ë§Œ í•´ë‘ë©´, ë‚˜ë¨¸ì§€ í…ŒìŠ¤íŠ¸ í˜¹ì€ UI í…ŒìŠ¤íŠ¸ë¥¼ í•˜ì§€ ì•Šì•„ë„ ìžì‹ ê° ë¿œë¿œ ê°€ëŠ¥. ì´ 70í¼ì„¼íŠ¸ë¥¼ ì–´ëŠ í…ŒìŠ¤íŠ¸ë¡œ ì»¤ë²„í•´ì•¼í•˜ì•¼ ì•ˆì •ê°ì„ ëŠë‚„ ìˆ˜ ìžˆëŠ”ì§€? ì˜ ê´€ì ìœ¼ë¡œ ì ‘ê·¼í•˜ë©´ ë§Žì´ ë„ì›€ë¨.

### ê³µì‹ë¬¸ì„œë¥¼ ë¨¼ì € í›‘ì–´ë´ì•¼ í•œë‹¤

- React ê³µì‹ì‚¬ì´íŠ¸: TESTING ì„¹ì…˜ì„ í•œë²ˆì”© í›‘ì–´ë³´ê¸°(í…ŒìŠ¤íŒ…ì— ëŒ€í•œ ì–˜ê¸°, í”„ë ˆìž„ì›Œí¬&ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ì²œ, ì»¤ë®¤ë‹ˆí‹°ì˜ ì§„í–‰ë°©ì‹ ë° ê¶Œìž¥ì‚¬í•­ í™•ì¸) * Rendering component trees(ë‹¨ìœ„í…ŒìŠ¤íŠ¸, í†µí•©í…ŒìŠ¤íŠ¸), Running a complete app(E2Eí…ŒìŠ¤íŠ¸)
- CRA ì‚¬ì´íŠ¸: Testing íŒŒíŠ¸. CRA ì—ì„œ í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë­ë­ í¬í•¨ë¼ìžˆëŠ”ì§€ í™•ì¸.
- Jest, React Testing Library: React, CRA ì‚¬ì´íŠ¸ì—ì„œëŠ” ë„ˆë¬´ ê°„ëžµí•˜ê²Œ ì„¤ëª…ë¼ìžˆì–´ì„œ ì§ì ‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¬¸ì„œë¥¼ ë³´ê³  ê³µë¶€í•´ì™€ì•¼ í•œë‹¤.

## 2ì¼ì°¨: ê¸°ì¡´ í”„ë¡œì íŠ¸ì— í…ŒìŠ¤íŠ¸ ì¶”ê°€í•˜ëŠ” ë°©ë²•1 - presenter ë§Œë“¤ê¸°

ê¸°ì¡´ í”„ë¡œì íŠ¸ì— í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ë ¤ë©´ UIë¡œë¶€í„° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ presenter ë¼ëŠ” í´ëž˜ìŠ¤ë¡œ ë–¼ë‚´ì–´ UIì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤. ì´ë ‡ê²Œë§Œ í•´ë„ ì „ë°˜ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¡œì§ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë¯€ë¡œ

- êµ³ì´ ë³µìž¡í•˜ê²Œ React Testing Library ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ì§€ ì•Šê³ 
- Jest ë§Œì„ ì´ìš©í•  ìˆ˜ ìžˆìœ¼ë©°
- E2E í…ŒìŠ¤íŠ¸ë¥¼ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

ë”°ë¼ì„œ ì ì€ ì‹œê°„ìœ¼ë¡œ ìµœëŒ€í•œ 80í¼ì„¼íŠ¸ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ìˆ˜ì¤€ì˜ íš¨ìœ¨(ì‹¤ì œë¡œëŠ” ì•„ë‹ˆì§€ë§Œ)ì´ ë°œìƒí•  ê²ƒì´ë¼ëŠ” ìžì‹ ê°ì´ ë¿œë¿œ ìƒê¸´ë‹¤!!

### Presenterëž€?

UIì—ì„œ ì²˜ë¦¬í•´ì•¼í•  ë¡œì§ì„ ë‹´ëŠ” í´ëž˜ìŠ¤ë‹¤. presenter ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ MVP ëª¨ë¸ì„ ì´ìš©í•˜ì—¬ View ì™€ Presenter ì‚¬ì´ì— ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ ì£¼ê³ ë°›ëŠ” ë°©ì‹ë„ ìžˆìœ¼ë‚˜, í•´ë‹¹ ëª¨ë¸ ì—†ì´ presenter ë§Œ ì‚¬ìš©í•´ë„ ë§Žì´ ê°œì„ í•  ìˆ˜ ìžˆë‹¤.

### React ì—ì„œ ì¢‹ì€ í…ŒìŠ¤íŠ¸ë¥¼ ìž‘ì„±í•˜ëŠ”ë²•

- ë¹„ì¦ˆë‹ˆìŠ¤ë¡œì§ì´ ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ ì˜ì¡´í•˜ê³  ìžˆìœ¼ë©´ React Testing Library ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë¯€ë¡œ í…ŒìŠ¤íŠ¸ì„±ì´ ë–¨ì–´ì§„ë‹¤. â‡’ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë¶„ë¦¬í•˜ì—¬ Jest ë§Œ ì‚¬ìš©í•˜ë„ë¡ í•´ì•¼ í•œë‹¤.**
- ë¡œì§ì´ React ì— ê²°í•©ë¼ ìžˆìœ¼ë©´ UI View ë¼ì´ë¸ŒëŸ¬ë¦¬ ë³€ê²½ì— ë”°ë¥¸ ìž¬ì‚¬ìš©ì„±ì´ ë–¨ì–´ì§„ë‹¤. â‡’ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ Presenter ë¡œ ë¶„ë¦¬í•´ì•¼ í•œë‹¤.**
- **ìµœëŒ€í•œ ViewëŠ” ì‹¬í”Œí•˜ê²Œ, ë©ì²­í•˜ê²Œ ìž‘ì„±**í•´ì•¼ í•œë‹¤: KISS ì›ì¹™. [https://www.youtube.com/watch?v=jafa3cqoAVM&t=24s](https://www.youtube.com/watch?v=jafa3cqoAVM&t=24s)

## 3ì¼ì°¨: ê¸°ì¡´ í”„ë¡œì íŠ¸ì— í…ŒìŠ¤íŠ¸ ì¶”ê°€í•˜ëŠ” ë°©ë²•2 - Unit Test ìž‘ì„±í•˜ê¸°

ìŒ.. Unit test ìž‘ì„±ì— ëŒ€í•œ íŠ¹ì´ì‚¬í•­ì€ ë”±ížˆ ì—†ì—ˆë‹¤. ê·¸ëƒ¥ ìž‘ì„±í•˜ë©´ ë˜ê³ , ê·¼ë° ìž‘ì„±í•˜ë©´ì„œ ì˜ë¬¸ì ì´ ë“ ê²Œ, Presenter í´ëž˜ìŠ¤ë¥¼ ìˆœìˆ˜í•¨ìˆ˜ì˜ ì§‘í•©ìœ¼ë¡œ ë‘ë©´ ì•ˆë ê¹Œ? ì˜€ë‹¤. this ì—ì„œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” í˜•íƒœì˜€ëŠ”ë°, ì°ì°í•˜ë„¤.. ì´ê±¸ React ì˜ ìƒíƒœì™€ ë™ê¸°í™” í•´ì•¼ í•˜ë‹ˆê¹Œ.. ì–´ë”˜ê°€ì—ì„œ ê°œë°œìžì˜ ì‹¤ìˆ˜ë¡œ ë™ê¸°í™” ì•ˆë˜ë©´ ì–´ë–¡í•˜ì§€? Presenter ëŠ” ê·¸ëƒ¥ ê°’ì„ ë°›ê³  ë±‰ëŠ” ì—­í• ì„ í•˜ëŠ”ê²Œ ë” ë°”ëžŒì§í•˜ì§€ ì•Šì„ê¹Œ? ë¼ëŠ” ìƒê°ì„ í•´ë³´ì•˜ë‹¤.

ê·¸ë¦¬ê³  ë˜ë‹¤ë¥¸ ê¹¨ë‹¬ìŒ!! immutable í•œ ë°°ì—´ ë“±ì„ ë±‰ì–´ë‚¼ë•Œ, ë³€ë™ì‚¬í•­ ì—†ëŠ” ìš”ì†ŒëŠ” êµ³ì´ ìƒˆë¡œ ìƒì„±í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ê²ƒ. êµ³ì´ ë˜ ìƒì„±í•œë‹¤ë©´, ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬ë  prop ê°’ì´ ë³€í™”ë˜ì–´ ë Œë”ë§ ìµœì í™”ì— ë¶ˆë¦¬í•˜ê²Œ ëœë‹¤. ê·¸ë‹ˆê¹Œ immutable í•œ ë°°ì—´ì„ ë§Œë“¤ë”ë¼ë„ ìµœì í™”ë¥¼ ê¼­ ê³ ë ¤í•´ì„œ ìƒˆë¡œ ë§Œë“¤ í•„ìš” ì—†ëŠ” ê°ì²´ëŠ” ìƒˆë¡œ ë§Œë“¤ì§€ ì•Šë„ë¡ í•´ì•¼í•œë‹¤.

í…ŒìŠ¤íŠ¸ì—ì„œë„ ì´ëŸ¬í•œ ì‚¬í•­ì´ ì§€ì¼œì¡ŒëŠ”ì§€ ë…¹ì—¬ë‚´ì•¼ í•œë‹¤. (toBe. ê°ì²´ì˜ ì°¸ì¡°ê°’ì´ ê°™ì€ì§€)

## 4ì¼ì°¨: ì²«ë²ˆì§¸ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸í•˜ê¸°

- React Testing Library: ì»´í¬ë„ŒíŠ¸ì˜ ë‚´ë¶€ êµ¬í˜„ì‚¬í•­ë³´ë‹¨ ì‚¬ìš©ìžì˜ ìž…ìž¥ì„ ê³ ë ¤í•˜ì—¬ ì†ì‰½ê²Œ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìžˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
- Matcher ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  jest-dom ì„ ì„¤ì¹˜í•´ì•¼í•œë‹¤ (**devdependency ì— ì„¤ì¹˜í•´ì•¼ ë™ìž‘í•œë‹¤!!)**
- Core API ì™€ Query ë¥¼ ìž˜ ì‚´íŽ´ë³´ê³  ê·¸ í›„ jest-dom ë¬¸ì„œì—ì„œ Matcher ë“¤ë„ ì‚´íŽ´ë³´ë©° ì´ë¥¼ ì–´ë–»ê²Œ ë§¤ì¹­ì‹œí‚¬ì§€ ìžì£¼ ê³ ë¯¼í•˜ìž
- fireEvent ë³´ë‹¨ userEvent ë¥¼ ì‚¬ìš©í•˜ìž. fireEvent ëŠ” low level ì´ê³  userEvent ê°€ ì‚¬ìš©ìžê°€ ë°œìƒì‹œí‚¤ëŠ” ì´ë²¤íŠ¸ì— ë” ê°€ê¹ë‹¤.

```jsx
import React from 'react'
import { render, screen } from '@testing-library/react'
import '@testing-library/jest-dom'
import HabitAddForm from '../habitAddForm'
import userEvent from '@testing-library/user-event'

describe('HabitAddForm', () => {
  let onAdd
  let input
  let button

  beforeEach(() => {
    onAdd = jest.fn()

    render(<HabitAddForm onAdd={onAdd} />)
    input = screen.getByPlaceholderText('Habit')
    button = screen.getByText('Add')
  })
  it('has input and add button', () => {
    expect(input).toBeInTheDocument()
    expect(button).toBeInTheDocument()
  })

  it('calls onAdd prop when add button is clicked and valid habit is entered', () => {
    // fireEvent.change(input, { target: { value: 'New Habit' } })
    // fireEvent.click(button)

    userEvent.type(input, 'New Habit')
    userEvent.click(button)

    expect(onAdd).toHaveBeenCalledWith('New Habit')
  })

  it('does not call onAdd when the habit is empty', () => {
    userEvent.type(input, '')
    userEvent.click(button)

    expect(onAdd).toHaveBeenCalledTimes(0)
  })
})

```
